@ README.md к проекту "HHParser" (Fullstack)

---

## Обзор

"HHParser" - это веб-приложение, разработанное для парсинга вакансий HH.ru и сохранения результатов в базе ранных. 

Приложение позволяет пользователям вводить поисковые запросы на главной странице, после чего собирает соответствующие вакансии, сохраняет их в базу данных и отображает результаты на экране, где пользователь может применить фильтрацию.

Проект выполнен студенткой группы БВТ2303 Ситниковой Дарьей.

---

## Технологический стек

1. **Язык программирования**: Python
   - Используется для написания основной логики приложения и взаимодействия с API HH.ru.

2. **Библиотека для взаимодействия с API**: requests
   - Используется для отправки HTTP-запросов к API HH.ru и получения данных о вакансиях.

3. **API**: HH.ru (https://api.hh.ru/)
   - Предоставляет данные о вакансиях, которые парсятся и сохраняются в базу данных.

4. **База данных**: PostgreSQL
   - Используется для хранения данных о вакансиях. В приложении реализованы функции для создания таблиц, вставки данных и выполнения запросов.

5. **Веб-фреймворк**: Flask
   - Используется для создания веб-интерфейса приложения. Flask обрабатывает HTTP-запросы, рендерит HTML-шаблоны и управляет маршрутизацией.

6. **HTML и CSS**
   - Используются для создания и стилизации веб-страниц. HTML-шаблоны рендерятся с помощью Flask.

7. **Контейнеризация**: Docker
   - Приложение упаковано в Docker-контейнеры для обеспечения портативности и легкости развертывания.

8. **Оркестрация контейнеров**: Docker Compose
   - Используется для управления и оркестрации нескольких контейнеров (веб-приложение и база данных).

## Структура файлов

<pre>
parser    
│    
├── _pycache_/                #  Кеширование скомпилированных файлов .py в байт-коде.
│
├── templates/               
│   ├── index.html            # Главная страница.         
│   ├── search_results.html   # Страница результатов парсеринга.
│   └── all_vacancies.html    # Страница со всеми вакансиями из базы данных.          
│         
├── venv                      # Виртуальная среда Python.       
├── main.py                   # Backend.
├── app.py                    # Flask приложение.                   
├── docker-compose.yml        # Файл конфигурации Docker Compose.  
├── Dockerfile                # Файл для создания образа Docker.   
└── requirements.txt          # Зависимости Python.  
</pre>

## Модули

- app.py: Основной модуль приложения, который отвечает за маршрутизацию и обработку HTTP-запросов. Использует Flask для создания веб-интерфейса.
- main.py: Модуль, отвечающий за взаимодействие с API HH.ru, обработку данных и взаимодействие с базой данных PostgreSQL.
- templates/ index.html: HTML шаблон используются для рендеринга веб-страниц в приложении.

## Взаимодействие с Backend

Взаимодействие между фронтендом (HTML-шаблоны) и бэкендом (Flask-приложение) обеспечивает динамическое отображение данных и обработку пользовательских запросов. Ниже описаны основные аспекты этого взаимодействия.

1. **Форма ввода запроса на главной странице (`index.html`)**
   - **Описание**: Пользователь вводит ключевое слово (keyword) для поиска вакансий и отправляет форму.
   - **Взаимодействие**: 
     - При отправке формы данные передаются на сервер через POST-запрос к маршруту `/`.
     - Flask обрабатывает запрос, вызывает функцию `main(keyword)` для парсинга вакансий и перенаправляет пользователя на страницу с результатами поиска.

2. **Отображение результатов поиска (`search_results.html`)**
   - **Описание**: Страница отображает вакансии, соответствующие по названию введенному ключевому слову и дополнительным параметрам фильтрации.
   - **Взаимодействие**:
     - При загрузке страницы Flask получает данные о вакансиях из базы данных, вызывая функцию `search_vacancies_by_keyword(keyword, ...)`.
     - Данные передаются в шаблон и рендерятся в виде таблицы с вакансиями.

3. **Отображение всех вакансий (`all_vacancies.html`)**
   - **Описание**: Страница отображает все вакансии, сохраненные в базе данных, с возможностью фильтрации по различным параметрам.
   - **Взаимодействие**:
     - При загрузке страницы Flask получает все вакансии из базы данных, вызывая функцию `get_all_vacancies()`.
     - Данные передаются в шаблон и рендерятся в виде таблицы с вакансиями.

## Пример взаимодействия

1. **Пользовательский запрос**:
   - Пользователь вводит ключевое слово "Python" в форму на главной странице и нажимает кнопку "Поиск".

2. **Обработка запроса на сервере**:
   - Flask получает POST-запрос на маршрут `/`.
   - Извлекает ключевое слово из формы и вызывает функцию `main(keyword)` для парсинга вакансий.
   - После завершения парсинга перенаправляет пользователя на маршрут `/search_results/Python`.

3. **Отображение результатов**:
   - Flask обрабатывает GET-запрос на маршрут `/search_results/Python`.
   - Вызывает функцию `search_vacancies_by_keyword(keyword)` для получения данных о вакансиях из базы данных.
   - Передает данные в шаблон `search_results.html`, который рендерит страницу с результатами поиска.


## Установка и запуск

1. В начале необходимо скачать данный репозиторий с гитхаба либо сделать git clone, для этого нужно воспользоваться терминалом PowerShell:
    cd "C:\папка"
    git clone https://github.com/Daria0w0/HHParser.git -b master
2. Необходимо перейти в папку приложения.
3. Приложение запускается через Docker.
    docker-compose up --build
4. После в консоли должно появиться сообщение, что веб-приложение запущено:
`Running on http://127.0.0.1:5000`
5. После перехода по ссылке `http://127.0.0.1:5000`, вам откроется сайт HHParser.

## Пример работы приложения

Сайт состоит из трех страниц: парсинг (главная), результаты запроса по ключевому слову с фильтрацией, все вакансии с фильтрацией.

Если пользователь хочет найти вакансию по названию.
 
1. Пользователь заходит на главную страницу и вводит поисковый запрос.
2. Приложение отправляет запрос к API HH.ru и получает данные о вакансиях.
3. Полученные данные сохраняются в базе данных PostgreSQL.
4. Результаты поиска отображаются на веб-странице, где пользователь может просматривать и фильтровать вакансии.
5. На главную страницу можно переключиться нажал кнопку `На главную`, находящуюся в панеле с фильтрацией.

Если пользователь хочет просмотреть все вакансии записанные в заху данных.

1. Пользователь заходит на главную страницу и нажимает кнопку `Все вакансии`.
3. Полученные данные сохраняются в базе данных PostgreSQL.
4. Все ранее записанные результаты поиска из базы данных отображаются на веб-странице, где пользователь может просматривать и фильтровать вакансии.
5. На главную страницу можно переключиться нажал кнопку `На главную`, находящуюся в панеле с фильтрацией.

Фильтрация может проходить по таким параметрам как: Город, зарплата, режим работы, формат работы, навыки.

По достижению 2000 вакансий в базе данных, база отчищается и создается заново.

## Тестирование

- Ручное тестирование.
- Нагрузочный тестирование: сайт раотает, когда на нем более 2000 вакансий.

## Контакты

Telegram - @manul0w0
